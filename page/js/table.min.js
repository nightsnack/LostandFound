$(document).ready(function(){function r(a){$.ajax({type:"POST",async:!1,url:t,data:{pagenum:a},success:function(t){i=t.page,$("#table1").append(d(t)),s()},dataType:"json"})}function c(t){confirm("您确定要删除吗?")&&$.post(a,{item_id:t.data.item_id},function(t){0==t.errno?location.reload():alert(t.error)},"json")}function s(){$("a[attr^='delgoods_']").each(function(){var t=$(this).attr("attr").split("_");$(this).bind("click",{item_id:t[1]},c)})}function u(t){p.$data.msg=t}var i,t="http://127.0.0.1/~chiyexiao/LostAndFound/index.php/ManageFind/query_page",a="http://127.0.0.1/~chiyexiao/LostAndFound/index.php/ManageFind/del_item",e="http://127.0.0.1/~chiyexiao/LostAndFound/index.php/ManageFind/query_item",n="http://127.0.0.1/~chiyexiao/LostAndFound/index.php/ManageFind/upd_item",o=$("#entry-template").html(),d=Handlebars.compile(o);r(1),$(".tcdPageCode").createPage({pageCount:i,current:1,backFn:function(t){$("#table1").empty(),r(t)}});var p=new Vue({el:"#abc",data:{msg:""},methods:{submit:function(){$.post(n,p.$data.msg,function(t){if(0==t.errno){$("#table1").empty();var a=$("span.current").html();r(a),$("#myModal").modal("hide")}else alert(t.error)},"json")}}});$("#edit_model").click(function(){var t;t=$(this).attr("data-id"),$("#myModal").on("show.bs.modal",function(){$.post(e,{item_id:t},function(t){u(t)},"json"),$("#myModal").modal()})})});